"use strict";(self.webpackChunkreact_social_media_2=self.webpackChunkreact_social_media_2||[]).push([[761],{4761:function(e,s,r){r.r(s);var t=r(4165),n=r(5861),a=r(9439),c=r(2791),o=r(1243),l=r(8911),i=r(3900),u=r(2058),h=r(184);s.default=function(){var e=(0,c.useContext)(i.Z),s=(0,u.x)({searchTerm:"",results:[],show:"neither",requestCount:0}),r=(0,a.Z)(s,2),d=r[0],f=r[1];(0,c.useEffect)((function(){return document.addEventListener("keyup",m),function(){document.removeEventListener("keyup",m)}}),[]),(0,c.useEffect)((function(){if(d.searchTerm.trim()){f((function(e){e.show="loading"}));var e=setTimeout((function(){f((function(e){e.requestCount++}))}),750);return function(){return clearTimeout(e)}}f((function(e){e.show="neither"}))}),[d.searchTerm]),(0,c.useEffect)((function(){if(d.requestCount){var e=function(){var e=(0,n.Z)((0,t.Z)().mark((function e(){var r;return(0,t.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,o.Z.post("/search",{searchTerm:d.searchTerm},{cancelToken:s.token});case 3:r=e.sent,f((function(e){e.results=r.data,e.show="results"})),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),console.log("There was a problem or the request was cancelled.");case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(){return e.apply(this,arguments)}}(),s=o.Z.CancelToken.source();return e(),function(){return s.cancel()}}}),[d.requestCount]);var m=function(s){27===s.keyCode&&e({type:"closeSearch"})};return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)("div",{className:"search-overlay-top shadow-sm",children:(0,h.jsxs)("div",{className:"container container--narrow",children:[(0,h.jsx)("label",{htmlFor:"live-search-field",className:"search-overlay-icon",children:(0,h.jsx)("i",{className:"fas fa-search"})}),(0,h.jsx)("input",{onChange:function(e){var s=e.target.value;f((function(e){e.searchTerm=s}))},autoFocus:!0,type:"text",autoComplete:"off",id:"live-search-field",className:"live-search-field",placeholder:"What are you interested in?"}),(0,h.jsx)("span",{onClick:function(){return e({type:"closeSearch"})},className:"close-live-search",children:(0,h.jsx)("i",{className:"fas fa-times-circle"})})]})}),(0,h.jsx)("div",{className:"search-overlay-bottom",children:(0,h.jsxs)("div",{className:"container container--narrow py-3",children:[(0,h.jsx)("div",{className:"circle-loader "+("loading"===d.show?"circle-loader--visible":"")}),(0,h.jsxs)("div",{className:"live-search-results "+("results"===d.show?"live-search-results--visible":""),children:[Boolean(d.results.length)&&(0,h.jsxs)("div",{className:"list-group shadow-sm",children:[(0,h.jsxs)("div",{className:"list-group-item active",children:[(0,h.jsx)("strong",{children:"Search Results"})," (",d.results.length," ",d.results.length>1?"items":"item"," found)"]}),d.results.map((function(s){return(0,h.jsx)(l.Z,{post:s,onClick:function(){return e({type:"closeSearch"})}},s._id)}))]}),!Boolean(d.results.length)&&(0,h.jsx)("p",{className:"alert alert-danger text-center shadow-sm",children:"Sorry, we could not find any results for that search."})]})]})})]})}}}]);
//# sourceMappingURL=761.7fa0766c.chunk.js.map