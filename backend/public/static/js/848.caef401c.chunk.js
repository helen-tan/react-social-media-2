"use strict";(self.webpackChunkreact_social_media_2=self.webpackChunkreact_social_media_2||[]).push([[848],{1692:function(e,t,a){a.r(t);var s=a(4165),n=a(5861),o=a(9439),c=a(2791),r=a(7689),l=a(1087),i=a(1243),u=a(2920),d=a(3861),p=a(2725),h=a(4051),m=a(8833),f=(a(2880),a(1458)),x=a(3900),j=a(184);t.default=function(){var e=(0,c.useState)(!0),t=(0,o.Z)(e,2),a=t[0],v=t[1],Z=(0,c.useState)(),w=(0,o.Z)(Z,2),k=w[0],b=w[1],g=(0,r.UO)().id,y=(0,c.useContext)(f.Z),N=(0,c.useContext)(x.Z),_=(0,r.s0)();(0,c.useEffect)((function(){var e=i.Z.CancelToken.source();function t(){return(t=(0,n.Z)((0,s.Z)().mark((function t(){var a;return(0,s.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,i.Z.get("/post/".concat(g),{cancelToken:e.token});case 3:a=t.sent,b(a.data),v(!1),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),console.log("There was a problem, or the request was cancelled.");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})))).apply(this,arguments)}return function(){t.apply(this,arguments)}(),function(){e.cancel()}}),[g]);var C=function(){var e=(0,n.Z)((0,s.Z)().mark((function e(){return(0,s.Z)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!window.confirm("Do you really want to delete this post?")){e.next=12;break}return e.prev=2,e.next=5,i.Z.delete("/post/".concat(g),{data:{token:y.user.token}});case 5:"Success"===e.sent.data&&(N({type:"flashMessage",value:{message:"Post was successfully deleted.",color:"success"}}),_("/profile/".concat(y.user.username))),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(2),console.log("There was a problem");case 12:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(){return e.apply(this,arguments)}}();if(!a&&!k)return(0,j.jsx)(p.Z,{});if(a)return(0,j.jsx)(u.Z,{title:"...",children:(0,j.jsx)(d.Z,{})});var D=new Date(k.createdDate),T="".concat(D.getMonth()+1,"/").concat(D.getDate(),"/").concat(D.getFullYear());return(0,j.jsxs)(u.Z,{title:k.title,children:[(0,j.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,j.jsx)("h2",{children:k.title}),!!y.loggedIn&&y.user.username===k.author.username&&(0,j.jsxs)("span",{className:"pt-2",children:[(0,j.jsx)(l.rU,{to:"/post/".concat(k._id,"/edit"),"data-tooltip-id":"edit-tooltip","data-tooltip-content":"Edit",className:"text-primary mr-2",children:(0,j.jsx)("i",{className:"fas fa-edit"})}),(0,j.jsx)(m.u,{id:"edit-tooltip",place:"top",className:"custom-tooltip"})," ",(0,j.jsx)("a",{onClick:C,"data-tooltip-id":"delete-tooltip","data-tooltip-content":"Delete",className:"delete-post-button text-danger",children:(0,j.jsx)("i",{className:"fas fa-trash"})}),(0,j.jsx)(m.u,{id:"delete-tooltip",place:"top",className:"custom-tooltip"})]})]}),(0,j.jsxs)("p",{className:"text-muted small mb-4",children:[(0,j.jsx)(l.rU,{to:"/profile/".concat(k.author.username),children:(0,j.jsx)("img",{className:"avatar-tiny",src:k.author.avatar})}),"Posted by ",(0,j.jsx)(l.rU,{to:"/profile/".concat(k.author.username),children:k.author.username})," on ",T]}),(0,j.jsx)("div",{className:"body-content",children:(0,j.jsx)(h.D,{children:k.body,allowedElements:["p","br","strong","em","h1","h2","h3","h4","h5","h6","ul","ol","li"]})})]})}}}]);
//# sourceMappingURL=848.caef401c.chunk.js.map